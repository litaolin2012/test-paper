(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app"],{0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var a=n("f8a4"),o=n.n(a);o.a},"41c9":function(e,t,n){"use strict";var a=n("5b56"),o=n.n(a);o.a},"56d7":function(e,t,n){"use strict";n.r(t);n("5b17");var a=n("51f7"),o=n.n(a),s=(n("9f45"),n("6e6d")),r=n("f2de"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},c=[],u={name:"App"},d=u,p=(n("034f"),n("4023")),f=Object(p["a"])(d,i,c,!1,null,null,null),l=f.exports,v=n("2832");function m(e){return m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function h(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function b(e){if(e&&e.__esModule)return e;if(null===e||"object"!==m(e)&&"function"!==typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}s["default"].use(v["a"]);var _=[{path:"/login",component:function(){return Promise.resolve().then((function(){return b(n("9ed6"))}))}}],y=new v["a"]({mode:"hash",base:"/test-paper/",routes:_,scrollBehavior:function(){return{y:0}}}),w={BASE_API:"http://192.168.2.48:8088/exam"},g=w,B={objApi:function(e){return e.config}},S=B;s["default"].use(r["a"]);var j=new r["a"].Store({getters:S,modules:{config:g}});n("b20f");s["default"].use(o.a),s["default"].use(r["a"]),s["default"].config.productionTip=!1,new s["default"]({router:y,store:j,render:function(e){return e(l)}}).$mount("#app")},"5b56":function(e,t,n){},"9ed6":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("h3",[e._v("实验操作考试")]),n("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[n("div",{staticClass:"print-div",attrs:{id:"baseContent"}},e._l(e.baseInfo,(function(t,a){return n("div",{key:a},[n("div",{staticClass:"base-content"},[n("h3",[n("span",[e._v("考场号 "+e._s(t.roomName)+" ")]),n("span",[e._v("座位号 "+e._s(t.seatSeq))])]),n("p",[n("span",[e._v("学科：")]),n("span",[e._v(e._s(t.subjectName))])]),n("p",[n("span",[e._v("姓名：")]),n("span",[e._v(e._s(t.studentName))])]),n("p",[n("span",[e._v("场次：")]),n("span",[e._v(e._s(t.sceneSeq))])]),n("p",[n("span",[e._v("考号：")]),n("span",[e._v(e._s(t.studentCode))])])]),n("div",{staticClass:"line-bottom"})])})),0)]),n("div",{staticClass:"test-info"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.barcode,expression:"barcode"}],ref:"barcode",staticClass:"draw-lots",attrs:{id:"barcode",placeholder:"扫一扫"},domProps:{value:e.barcode},on:{blur:e.inputBlur,input:function(t){t.target.composing||(e.barcode=t.target.value)}},nativeOn:{keydown:function(t){return e.preventInput(t)}}}),e.showBaseInfo?n("h3",[e._v("第"+e._s(e.params.seq)+"场考试 抽签进行中")]):e._e(),n("div",[e.showBaseInfo?e._e():n("div",{staticClass:"open-draw-lots"},[n("strong",{on:{click:e.testApi}},[e._v("扫描场次二维码开启抽签")])]),e.showBaseInfo?n("div",{staticClass:"barcode-info"},e._l(e.baseInfo,(function(t,a){return n("div",{key:a},[n("div",{staticClass:"base-content"},[n("h3",[n("span",[e._v("考场号 "+e._s(t.roomName)+" ")]),n("span",[e._v("座位号 "+e._s(t.seatSeq))])]),n("p",[n("span",[e._v("学科：")]),n("span",[e._v(e._s(t.subjectName))])]),n("p",[n("span",[e._v("姓名：")]),n("span",[e._v(e._s(t.studentName))])]),n("p",[n("span",[e._v("场次：")]),n("span",[e._v(e._s(t.sceneSeq))])]),n("p",[n("span",[e._v("考号：")]),n("span",[e._v(e._s(t.studentCode))])])])])})),0):e._e()])])])},o=[],s=n("2427"),r=n.n(s);function i(e){return new Promise((function(t,n){var a=r.a.create({withCredentials:!0,headers:{},baseURL:"http://192.168.2.222:8088/exam",timeout:1e4});a(e).then((function(e){var n=e.data;t(n)})).catch((function(e){n(e.response)}))}))}var c=[];function u(){return arguments.length&&c.push(Array.prototype.slice.call(null,arguments)),u}function d(e){return i({url:"/external/scene/drawStatus",method:"put",data:e})}function p(e){return i({url:"/external/scene/draw",method:"post",data:e})}u.value=function(){var e=0;return c.forEach((function(t){e+=t})),e};var f=n("71e3"),l=n.n(f),v=n("b27f"),m={name:"Login",data:function(){return{showBaseInfo:!1,stopDrawLots:!1,barcode:"",barcodeDom:null,hasTips:!1,oldBarcode:"",baseInfo:[{roomName:"",seatSeq:"",subjectName:"",studentName:"",sceneSeq:"",studentCode:""}],params:{seq:""}}},watch:{barcode:function(){var e=this;this.barcode&&(this.oldBarcode?(this.barcode=this.oldBarcode,this.hasTips||(this.hasTips=!0,Object(v["setTimeout"])((function(){e.hasTips=!1}),1500))):"}"===this.barcode[this.barcode.length-1]&&(this.oldBarcode=this.barcode,Object(v["setTimeout"])((function(){e.oldBarcode=""}),2e3),this.getData()))}},created:function(){},mounted:function(){this.barcodeDom=document.getElementById("barcode"),this.barcodeDom.focus()},methods:{testApi:function(){var e=this;d().then((function(t){e.$message("第".concat(e.params.seq,"场考试抽签开始")),e.showBaseInfo=!0,e.barcode=""})).catch((function(e){console.log(e)}))},getData:function(){var e=this;if(!navigator.onLine)return this.$message({message:"当前处于未联网的状态！",type:"warning",duration:1500}),!1;var t=JSON.parse(this.barcode);t.opType?(t.seq=this.params.seq,p(t).then((function(t){Array.isArray(t)&&t.length?(e.baseInfo=t,e.$nextTick((function(){e.printPaper(),Object(v["setTimeout"])((function(){e.oldBarcode="",e.barcode=""}),1500)}))):e.baseInfo=[{roomName:"",seatSeq:"",subjectName:"",studentName:"",sceneSeq:"",studentCode:""}]})).catch((function(t){console.log(t,333),e.$message({message:t.data.message,type:"error",duration:2e3}),e.oldBarcode="",e.barcode=""}))):(this.params.seq=t.seq,d(t).then((function(t){e.$message("第".concat(e.params.seq,"场考试抽签开始")),e.showBaseInfo=!0,e.barcode=""})))},printPaper:function(){l()({printable:"baseContent",type:"html",targetStyles:["*"]})},inputBlur:function(){this.barcodeDom.focus()},preventInput:function(e){return e.preventDefault(),!1}}},h=m,b=(n("41c9"),n("4023")),_=Object(b["a"])(h,a,o,!1,null,"3d6e1e85",null);t["default"]=_.exports},b20f:function(e,t,n){},f8a4:function(e,t,n){}},[[0,"runtime","chunk-elementUI","chunk-libs"]]]);